var sssfight={Shadowbringers:{Hades:{AST:861360,BLM:1963960,DNC:1327560,DRG:1793760,MNK:1762680,NIN:1574720,RDM:1685720,SAM:1758240,SCH:957560,SMN:1700520,WHM:1157360},"Eden NM":{AST:890360,BLM:2033520,DNC:1374920,DRG:1857400,MNK:1824840,NIN:1629480,RDM:1744920,SAM:1818920,SCH:991600,SMN:1759720,WHM:1197320},"Titania EX":{AST:923520,BLM:2106040,BRD:1691640,DNC:1423760,DRG:1924e3,DRK:1164760,GNB:1204720,MCH:1836680,MNK:1889960,NIN:1688680,PLD:1210640,RDM:1808560,SAM:1884040,SCH:1027120,SMN:1823360,WAR:1142560,WHM:1240240},"Innocence EX":{AST:923520,BLM:2106040,BRD:1691640,DNC:1423760,DRG:1924e3,DRK:1164760,GNB:1204720,MCH:1836680,MNK:1889960,NIN:1688680,PLD:1210640,RDM:1808560,SAM:1884040,SCH:1027120,SMN:1823360,WAR:1142560,WHM:1240240},"Hades EX": {"AST":1130720,"BLM":2468640,"BRD":1904760,"DNC":1681280,"DRG":2211120,"DRK":1330520,"GNB":1364560,"MCH":2193360,"MNK":2184480,"NIN":2150440,"PLD":1358640,"RDM":2239240,"SAM":2292520,"SCH":1157360,"SMN":2294000,"WAR":1308320,"WHM":1407480},E1S:{AST:1016760,BLM:2316200,DRG:2052760,MNK:2079400,NIN:1857400,RDM:1989120,SAM:2073480,SCH:1130720,SMN:2005400,WHM:1364560},E2S:{AST:1047840,BLM:2388720,DRG:2117880,MNK:2144520,NIN:1916600,RDM:2051280,SAM:2138600,SCH:1164760,SMN:2069040,WHM:1407480},E3S:{AST:1080400,BLM:2462720,DRG:2181520,MNK:2209640,NIN:1974320,RDM:2113440,SAM:2202240,SCH:1200280,SMN:2131200,WHM:1450400},E4S:{AST:1147e3,BLM:2616640,DRG:2319160,MNK:2347280,NIN:2097160,RDM:2246640,SAM:2341360,SCH:1275760,SMN:2265880,WHM:1540680}},Stormblood:{Shinryu:{AST:330905,BLM:640055,BRD:519257,DRG:569637,DRK:344645,MCH:523265,MNK:607995,NIN:607995,PLD:363537,RDM:603415,SAM:629750,SCH:357812,SMN:610857,WAR:365255,WHM:397315},Deltascape:{AST:345522,BLM:665245,BRD:539867,DRG:591965,DRK:358385,MCH:543875,MNK:632040,NIN:631467,PLD:377850,RDM:627460,SAM:654940,SCH:372125,SMN:634902,WAR:379567,WHM:413345},Sigmascape:{AST:420215,BLM:840430,BRD:682420,DRG:722495,DRK:488915,MCH:699595,MNK:768867,NIN:741960,PLD:488342,RDM:758562,SAM:791767,SCH:454565,SMN:802072,WAR:531280,WHM:504372},Alphascape:{AST:506090,BLM:1049965,BRD:822110,DRG:870772,DRK:589102,MCH:842720,MNK:926305,NIN:894245,PLD:587957,RDM:941190,SAM:966380,SCH:547310,SMN:966380,WAR:640055,WHM:607422},"Susano EX":{AST:355522,BLM:687572,BRD:558187,DRG:612002,DRK:370407,MCH:562195,MNK:653222,NIN:653222,PLD:390445,RDM:648642,SAM:677267,SCH:384720,SMN:656085,WAR:392162,WHM:427085},"Lakshmi EX":{AST:355522,BLM:687572,BRD:558187,DRG:612002,DRK:370407,MCH:562195,MNK:653222,NIN:653222,PLD:390445,RDM:648642,SAM:677267,SCH:384720,SMN:656085,WAR:392162,WHM:427085},"Shinryu EX":{AST:407620,BLM:800927,BRD:669252,DRG:701312,DRK:533570,MCH:690435,MNK:740815,NIN:732227,PLD:532997,RDM:752837,SAM:780890,SCH:440825,SMN:778027,WAR:589675,WHM:489487},"Byakko EX":{AST:461435,BLM:922870,BRD:749402,DRG:793485,DRK:574790,MCH:768295,MNK:844437,NIN:815240,PLD:574217,RDM:832987,SAM:869055,SCH:499220,SMN:881077,WAR:624597,WHM:553607},"Tsukyomi EX":{AST:491205,BLM:982982,BRD:797492,DRG:845010,DRK:610285,MCH:818102,MNK:898825,NIN:867910,PLD:609712,RDM:886802,SAM:925160,SCH:531280,SMN:937755,WAR:663527,WHM:589675},"Suzaku EX":{AST:557042,BLM:1156450,BRD:905122,DRG:958365,DRK:689290,MCH:928022,MNK:1020195,NIN:984700,PLD:688145,RDM:1036797,SAM:1064277,SCH:602842,SMN:1063705,WAR:748830,WHM:668680},"Seiryu EX":{AST:592537,BLM:1229157,BRD:961800,DRG:1019050,DRK:731082,MCH:1011607,MNK:1094620,NIN:1046530,PLD:729937,RDM:1102062,SAM:1131260,SCH:640627,SMN:1131260,WAR:794057,WHM:711045},O1S:{AST:391017,BLM:756272,BRD:613720,DRG:672687,DRK:439107,MCH:618300,MNK:718487,NIN:717915,PLD:462580,RDM:713335,SAM:744250,SCH:423077,SMN:721350,WAR:464870,WHM:469450},O2S:{AST:403612,BLM:780317,BRD:633185,DRG:684442,DRK:452275,MCH:637765,MNK:740815,NIN:740815,PLD:476892,RDM:735662,SAM:767722,SCH:436245,SMN:744250,WAR:479182,WHM:484335},O3S:{AST:415625,BLM:804362,BRD:652650,DRG:715625,DRK:466015,MCH:657230,MNK:763715,NIN:763715,PLD:491205,RDM:758562,SAM:791195,SCH:449985,SMN:767150,WAR:493495,WHM:499220},O4S:{AST:441970,BLM:854742,BRD:693870,DRG:760280,DRK:493495,MCH:698450,MNK:811805,NIN:811232,PLD:520402,RDM:806080,SAM:841002,SCH:478037,SMN:815240,WAR:522692,WHM:530707},O5S:{AST:476320,BLM:952640,BRD:773447,DRG:819247,DRK:592537,MCH:793485,MNK:871917,NIN:841575,PLD:591965,RDM:859895,SAM:897107,SCH:515250,SMN:909130,WAR:644062,WHM:571355},O6S:{AST:491205,BLM:982982,BRD:797492,DRG:845010,DRK:610285,MCH:818102,MNK:898825,NIN:867910,PLD:609712,RDM:886802,SAM:925160,SCH:531280,SMN:937755,WAR:663527,WHM:589675},O7S:{AST:506090,BLM:1012752,BRD:822110,DRG:870772,DRK:628605,MCH:842720,MNK:926305,NIN:894245,PLD:627460,RDM:913710,SAM:953785,SCH:547310,SMN:966380,WAR:682420,WHM:607422},O8S:{AST:541012,BLM:1082597,BRD:878787,DRG:930885,DRK:669825,MCH:901115,MNK:990425,NIN:956075,PLD:668680,RDM:977257,SAM:1019622,SCH:585095,SMN:1033362,WAR:727647,WHM:649215},O9S:{AST:573072,BLM:1189655,BRD:930885,DRG:986417,DRK:708182,MCH:954930,MNK:1049392,NIN:1012752,PLD:707037,RDM:1066567,SAM:1095192,SCH:620017,SMN:1094620,WAR:769440,WHM:688145},O10S:{AST:592537,BLM:1229157,BRD:961800,DRG:1019050,DRK:731082,MCH:986417,MNK:1084315,NIN:1046530,PLD:729937,RDM:1102062,SAM:1131260,SCH:640627,SMN:1131260,WAR:794057,WHM:711045},O11S:{AST:611430,BLM:1268660,BRD:992715,DRG:1051682,DRK:753410,MCH:1018477,MNK:1119237,NIN:1080307,PLD:752265,RDM:1136985,SAM:1167327,SCH:661237,SMN:1167327,WAR:818675,WHM:733945},O12S:{AST:649215,BLM:1347092,BRD:1053972,DRG:1116375,DRK:797492,MCH:1081452,MNK:1187937,NIN:1146717,PLD:796347,RDM:1207402,SAM:1240035,SCH:701885,SMN:1239462,WAR:866765,WHM:779172}}};


$(document).ready(function() {
    

    
var selfight = $("#selfight");
var selclass = $("#selclass");
var fightcalc = $(".fightcalc");
var textinput = $(".textinput");
var resrow = $("#res");
var restext = $("#restext");

var remtime = $("#remainingtime");
var remhp = $("#hppercent");



$.each(sssfight, function(val, text) {
        var optgroup = $('<optgroup label="'+ val +'">')
	$.each(text, function(val, text) {
	    optgroup.append(
		$('<option></option>').val(val).html(val)
	    );
	});
	selfight.append(optgroup);
});

$(selfight).change(function() {
	selclass.empty();
	if (selfight.val() === "NULL"){
		selclass.attr("disabled", true);
		fightcalc.hide();
		textinput.val('0');
		resrow.hide();
		restext.html("");
	}
	else {
    var label=$('#selfight :selected').parent().attr('label');
		$.each(sssfight[label][selfight.val()], function(val, text) {
	    selclass.append(
		$('<option></option>').val(text).html(val)
	    );
		selclass.attr("disabled", false);
                fightcalc.show();
	});
}
});

$( "#reset" ).click(function() {
  selfight
     .val('NULL')
     .trigger("change");
});

$( "#calculate" ).click(function() {
  var totalhp = Number(selclass.val());
  var remaininghp = Number(remhp.val());
  var remainingtime = Number(remtime.val());
  var maxtime = Number("180");
  console.log(totalhp)
console.log(remaininghp)
console.log(remainingtime)
console.log(maxtime)
  var resultdps = Math.ceil((totalhp - ((remaininghp / 100) * totalhp)) / (maxtime - remainingtime));
  resrow.show();
  restext.html("DPS: " + resultdps);
});

});


